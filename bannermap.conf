server {
    listen 80;
    server_name 10.226.45.48 localhost _;

    location /static/ {
        alias /u01/app/forum/bannermap/geodjango/staticfiles/;
    }

    location /media/ {
        alias /u01/app/forum/bannermap/geodjango/media/;
    }

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}



# Proxy Django at /app/
location /app/ {
    proxy_pass http://127.0.0.1:8001;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_redirect off;
}

# Serve static files
location /static/ {
    alias /u01/app/forum/bannermap/static/;
}

# Serve media files
location /media/ {
    alias /u01/app/forum/bannermap/media/;
}


    [Unit]
    Description=gunicorn daemon for Django Banner map
    After=network.target

[Service]
User=forum
Group=nginx
WorkingDirectory=/u01/app/forum/bannermap/geodjango
ExecStart=/u01/app/forum/bannermap/env/bin/gunicorn --workers 3 --bind 127.0.0.1:8000 geodjango.wsgi:application

[Install]
WantedBy=multi-user.target

<VirtualHost *:80>
    ServerAdmin root@localhost

    # Let Apache keep serving the existing site
    DocumentRoot "/var/www/html"

    # Proxy only the /bannermap path to Nginx
    ProxyPreserveHost On
    ProxyPass /bannermap http://localhost:8080/
    ProxyPassReverse /bannermap http://localhost:8080/

    ErrorLog /var/log/httpd/bannermap_error.log
    CustomLog /var/log/httpd/bannermap_access.log combined
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin root@localhost

    # Proxy requests to /bannermap to Nginx/Django app
    ProxyPreserveHost On
    ProxyPass /bannermap http://localhost:8080/
    ProxyPassReverse /bannermap http://localhost:8080/

    ErrorLog /var/log/httpd/bannermap_proxy_error.log
    CustomLog /var/log/httpd/bannermap_proxy_access.log combined
</VirtualHost>
